{% extends 'private/base.html' %}

{% block main %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
<script src="{{ url_for('static', filename='js/home.js') }}" defer></script>
<div class="modals-container" id="modals-container">
    <modal class="modal-container" id="add-hackathon-modal">
        <div class="modal-header">
            <h2>Add Hackathon</h2>
            <svg onclick="closeModal('add-hackathon-modal')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
        </div>
        <div class="modal-body">
            {% if session.logged_in %}
            <div class="error-message-container" id="add-hackathon-error-message-container">
                <p class="error-message" id="add-hackathon-error-message"></p>
            </div>
            <form id="add-hackathon-form" onsubmit="addHackathonFormSubmit(event)">
                <label for="hackathon-name">Hackathon Name</label>
                <input type="text" id="hackathon-name" name="hackathon-name" required>
                <label for="organizing-body-name">Organizing Body Name</label>
                <input type="text" id="organizing-body-name" name="organizing-body-name" required>
                <label for="last-iteration-date">Last Iteration Date</label>
                <input type="date" id="last-iteration-date" name="last-iteration-date" required>
                <label for="last-iteration-location">Last Iteration Location</label>
                <input type="text" id="last-iteration-location" name="last-iteration-location" required>
                <label for="last-prize-pool">Last Prize Pool (in INR)</label>
                <input type="number" id="last-prize-pool" name="last-prize-pool" required>
                <label for="website-link">Website Link</label>
                <input type="text" id="website-link" name="website-link" required>
                <button type="submit">Add Hackathon</button>
            </form>
            {% else %}
            <div class="error-message-container" id="add-hackathon-error-message-container">
                <p class="error-message" id="add-hackathon-error-message">Please, authenticate yourself by logging in <a href="/auth/login" onclick="window.open('/auth/login', 'newwindow', 'width=600, height=600'); return false;">here</a>, before adding a hackathon.<br><br>This helps us in maintaining the integrity of the data, as well as in attributing the hackathon to the right person.</p>
            </div>
            {% endif %}
        </div>
    </modal>
    <modal class="modal-container" id="edit-hackathon-modal">
        <div class="modal-header">
            <h2>Edit Hackathon</h2>
            <svg onclick="closeModal('edit-hackathon-modal')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
        </div>
        <div class="modal-body">
            {% if session.logged_in %}
            <div class="error-message-container" id="edit-hackathon-error-message-container">
                <p class="error-message" id="edit-hackathon-error-message"></p>
            </div>
            <form id="edit-hackathon-form" onsubmit="editHackathonFormSubmit(event)">
                <label for="edit-hackathon-name">Hackathon Name</label>
                <input type="text" id="edit-hackathon-name" name="edit-hackathon-name" required>
                <label for="edit-organizing-body-name">Organizing Body Name</label>
                <input type="text" id="edit-organizing-body-name" name="edit-organizing-body-name" required>
                <label for="edit-last-iteration-date">Last Iteration Date</label>
                <input type="date" id="edit-last-iteration-date" name="edit-last-iteration-date" required>
                <label for="edit-last-iteration-location">Last Iteration Location</label>
                <input type="text" id="edit-last-iteration-location" name="edit-last-iteration-location" required>
                <label for="edit-last-prize-pool">Last Prize Pool (in INR)</label>
                <input type="number" id="edit-last-prize-pool" name="edit-last-prize-pool" required>
                <label for="edit-website-link">Website Link</label>
                <input type="text" id="edit-website-link" name="edit-website-link" required>
                <input type="hidden" id="edit-hackathon-id" name="edit-hackathon-id">
                <button type="submit">Edit Hackathon</button>
            </form>
            {% else %}
            <div class="error-message-container" id="edit-hackathon-error-message-container">
                <p class="error-message" id="edit-hackathon-error-message">Please, authenticate yourself by logging in <a href="/auth/login" onclick="window.open('/auth/login', 'newwindow', 'width=600, height=600'); return false;">here</a>, before editing a hackathon.<br><br>This helps us in maintaining the integrity of the data, as well as in attributing the hackathon to the right person.</p>
            </div>
            {% endif %}
        </div>
    </modal>
    <modal class="modal-container" id="report-hackathon-modal">
        <div class="modal-header">
            <h2>Report Hackathon</h2>
            <svg onclick="closeModal('report-hackathon-modal')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
        </div>
        <div class="modal-body">
            {% if session.logged_in %}
            <div class="error-message-container" id="report-hackathon-error-message-container">
                <p class="error-message" id="report-hackathon-error-message"></p>
            </div>
            <form id="report-hackathon-form" onsubmit="reportHackathonFormSubmit(event)">
                <label for="report-reason">Reason</label>
                <select id="report-reason" name="report-reason" required>
                    <option value="spam">Spam</option>
                    <option value="duplicate">Duplicate</option>
                    <option value="inaccurate">Inaccurate</option>
                    <option value="inappropriate">Inappropriate</option>
                    <option value="not-hackathon">Not a hackathon</option>
                    <option value="other">Other</option>
                </select>   
                <label for="report-description">Description</label>
                <textarea id="report-description" name="report-description" required></textarea>
                <input type="hidden" id="report-hackathon-id" name="report-hackathon-id">
                <button type="submit">Report Hackathon</button>
            </form>
            {% else %}
            <div class="error-message-container" id="report-hackathon-error-message-container">
                <p class="error-message" id="report-hackathon-error-message">Please, authenticate yourself by logging in <a href="/auth/login" onclick="window.open('/auth/login', 'newwindow', 'width=600, height=600'); return false;">here</a>, before reporting a hackathon.<br><br>This helps us in preventing misuse of the reporting feature.</p>
            </div>
            {% endif %}
        </div>
    </modal>

</div>
<div class="header-container">
    <div class="search-container">
        <input type="text" class="search-input" placeholder="Search for hackathons [/]" oninput="searchHackathons(this.value)" id="search-input">
        <svg onclick="searchHackathons(document.getElementById('search-input').value)" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
    </div>
    <a href="https://github.com/Om-Mishra7/Hackathons" target="_blank" class="github-link" id="github-link">GitHub</a>
    {% if session.logged_in %}
    <a href="/auth/logout" class="logout-link">Logout({{ session.user.account_information.login }})</a>
    <a href="/auth/logout" class="logout-link-mobile">Logout</a>
    {% else %}
    <a href="/auth/login" class="login-link" onclick="window.open('/auth/login', 'newwindow', 'width=600, height=600'); return false;">Login</a>
    {% endif %}

</div>
<div class="project-info-container">
    <p class="contribute">If you know of any hackathons that are not listed here, please feel free to contribute to this project by adding the hackathon to the list. You can do so by clicking on the "Add Hackathon" button below.</p>
</div>
<div class="add-hackathon-container">
    <a class="export-hackathon" href="/export?format=json"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M240-40q-33 0-56.5-23.5T160-120v-440q0-33 23.5-56.5T240-640h120v80H240v440h480v-440H600v-80h120q33 0 56.5 23.5T800-560v440q0 33-23.5 56.5T720-40H240Zm200-280v-447l-64 64-56-57 160-160 160 160-56 57-64-64v447h-80Z"/></svg>Export</a>
    <a class="add-hackathon" onclick="addHackathon()"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"/></svg>Add Hackathon</a>
</div>
<div class="hackathons-container" id="hackathons-container">
{% for hackathon in hackathons %}
    <article class="hackathon-container">
        <div class="hackthon-header-container"><h2>{{ hackathon.hackathon_name }}</h2>
        <p>organised by {{ hackathon.organizing_body_name }}</p>
        </div>
        <div class="hackathon-metadata-container">
        <p><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Zm280 240q-17 0-28.5-11.5T440-440q0-17 11.5-28.5T480-480q17 0 28.5 11.5T520-440q0 17-11.5 28.5T480-400Zm-160 0q-17 0-28.5-11.5T280-440q0-17 11.5-28.5T320-480q17 0 28.5 11.5T360-440q0 17-11.5 28.5T320-400Zm320 0q-17 0-28.5-11.5T600-440q0-17 11.5-28.5T640-480q17 0 28.5 11.5T680-440q0 17-11.5 28.5T640-400ZM480-240q-17 0-28.5-11.5T440-280q0-17 11.5-28.5T480-320q17 0 28.5 11.5T520-280q0 17-11.5 28.5T480-240Zm-160 0q-17 0-28.5-11.5T280-280q0-17 11.5-28.5T320-320q17 0 28.5 11.5T360-280q0 17-11.5 28.5T320-240Zm320 0q-17 0-28.5-11.5T600-280q0-17 11.5-28.5T640-320q17 0 28.5 11.5T680-280q0 17-11.5 28.5T640-240Z"/></svg>{{ hackathon.last_iteration_date}}</p>
        <p><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>{{ hackathon.last_iteration_location }}</p>
        <p><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M560-440q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35ZM280-320q-33 0-56.5-23.5T200-400v-320q0-33 23.5-56.5T280-800h560q33 0 56.5 23.5T920-720v320q0 33-23.5 56.5T840-320H280Zm80-80h400q0-33 23.5-56.5T840-480v-160q-33 0-56.5-23.5T760-720H360q0 33-23.5 56.5T280-640v160q33 0 56.5 23.5T360-400Zm440 240H120q-33 0-56.5-23.5T40-240v-440h80v440h680v80ZM280-400v-320 320Z"/></svg>{{ hackathon.last_prize_pool | format_currency }}</p>
        <a class="hackathon-website-url" href="{{ hackathon.website_link }}" target="_blank" ><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"/></svg>{{ hackathon.website_link }}</a>
        </div>
        <div class="hackathon-actions-container">
            <a class="hackathon-action edit-hackathon" onclick="editHackathon('{{ hackathon._id }}')"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg></a>
            <a class="hackathon-action history-hackathon" href="/hackathons/{{hackathon._id}}/history"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-120q-138 0-240.5-91.5T122-440h82q14 104 92.5 172T480-200q117 0 198.5-81.5T760-480q0-117-81.5-198.5T480-760q-69 0-129 32t-101 88h110v80H120v-240h80v94q51-64 124.5-99T480-840q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-480q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-120Zm112-192L440-464v-216h80v184l128 128-56 56Z"/></svg></a>
            <a class="hackathon-action report-hackathon" onclick="reportHackathon('{{ hackathon._id }}')"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240ZM330-120 120-330v-300l210-210h300l210 210v300L630-120H330Zm34-80h232l164-164v-232L596-760H364L200-596v232l164 164Zm116-280Z"/></svg></a>
        </div>
    </article>
{% endfor %}
</div>
{% endblock %}